# 路由

## 一. 基本使用

### 第一步：安装`vue-router`

```shell
npm install vue-router --save
```

### 第二步：在`src`下新建`router`文件夹，在`router`中创建`index.js`文件：

```js
//1.导入vue-router模块
import VueRouter from 'vue-router'
import Vue from 'vue'

//2.通过Vue.use()方法，安装插件键
Vue.use(VueRouter);

//3.创建VueRouter对象
const vueRouter = new VueRouter({
    //配置路径和组件的关系
    routes:[

    ]
});

//4.导出VueRouter对象，方便在main.js中引入该对象，然后将其传入vue实例中
export default vueRouter;
```

在`src/router/index.js`中我们需要创建一个VueRouter对象并导出该对象，然后我们需要在`src/main.js`中导入该模块。

### 第三步：在`main.js`中引入router

```js
import Vue from 'vue'
import App from './App.vue'
import router from "./router"; //这里引用src/router/index.js文件，由于文件是index.js则可以省略，它会默认找目录下的index.js

Vue.config.productionTip = false

new Vue({
  render: h => h(App),
  router,//将路由对象放入Vue实例中
}).$mount('#app')

```

前三步的配置，我们搭建好了router的基本框架，我们现在就需要对router进行细节上的配置了。

### 第四步：配置路由映射

首先为了演示方便，我们先在`src/components`目录下创建两个文件：Home.vue、About.vue。我们配置这两个组件对应的路由：

```js
...

const vueRouter = new VueRouter({
    //配置路径和组件的关系
    routes:[
        {
            path: "/home",
            component: Home
        },
        {
            path: "/about",
            component: About
        }
    ]
});

...
```

### 第五步：使用`<router-link>`和`<router-view>`

完成路由映射的配置后，我们还需要在`src/App.vue`中使用`router-view`标签指明组件渲染的位置。

首先我们得知道，为什么是在`App.vue`中添加`router-view`标签？

这是因为在`src/main.js`中render函数中指定的是`App.vue`组件。实际上Vue实例在创建后会使用render函数指向的组件去渲染到我们指定的`index.html`页面容器中；而路由就是通过Vue内部逻辑，控制其它组件渲染到`App.vue`中的`<router-view>`中:

```vue
<template>
  <div id="app">
    <!--使用router-linker进行跳转-->
    <router-link to="/home">首页</router-link>
    <router-link to="/about">关于</router-link>                   
    <router-view></router-view>
  </div>
</template>

<script>
export default {
  name: 'App',
  components: {
  }
}
</script>
```

## 二. 其它配置

### 2.1 路由重定向

如果我们需要当用户输入网址时默认跳转到一个组件上去，我们可以借助重定向：

```js
routes:[
        {
          path: "",
          redirect: "/home" //当用户输入缺省值时我们重定向到首页
        },
        {
            path: "/home",
            component: Home
        },
        {
            path: "/about",
            component: About
        }
    ]
```

### 2.2 使用History模式跳转

`VueRouter`默认情况下是使用的`Hash`模式来管理URL的，但是`Hash`模式中的URL总是存在#号，我们可以在创建时将URL管理模式指定成History模式：

```js
const vueRouter = new VueRouter({
    //配置路径和组件的关系
    routes:[
        {
          path: "",
          redirect: "/home"
        },
        {
            path: "/home",
            component: Home
        },
        {
            path: "/about",
            component: About
        }
    ],
    mode: 'history'
});
```

hash模式和history模式的具体区别请参考：[URL hash和HTML5 history](./_7URL_hash和HTML5_history.md)

